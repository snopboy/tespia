/** @license
 * DHTML Snowstorm! JavaScript-based snow for web pages
 * Making it snow on the internets since 2003. You're welcome.
 * -----------------------------------------------------------
 * Version 1.44.20131208 (Previous rev: 1.44.20131125)
 * Copyright (c) 2007, Scott Schiller. All rights reserved.
 * Code provided under the BSD License
 * http://schillmania.com/projects/snowstorm/license.txt
 */
var snowStorm=(function(o,s){this.autoStart=true;this.excludeMobile=true;this.flakesMax=128;this.flakesMaxActive=64;this.animationInterval=33;this.useGPU=true;this.className=null;this.flakeBottom=null;this.followMouse=true;this.snowColor="#fff";this.snowCharacter="&bull;";this.snowStick=true;this.targetElement=null;this.useMeltEffect=true;this.useTwinkleEffect=false;this.usePositionFixed=false;this.usePixelPosition=false;this.freezeOnBlur=false;this.flakeLeftOffset=0;this.flakeRightOffset=0;this.flakeWidth=8;this.flakeHeight=8;this.vMaxX=5;this.vMaxY=4;this.zIndex=0;var f=this,k,u=navigator.userAgent.match(/msie/i),t=navigator.userAgent.match(/msie 6/i),r=navigator.userAgent.match(/mobile|opera m(ob|in)/i),d=(u&&s.compatMode==="BackCompat"),p=(d||t),b=null,v=null,B=null,w=null,i=null,c=null,a=null,A=1,l=2,j=6,m=false,z=false,y=(function(){try{s.createElement("div").style.opacity="0.5"}catch(C){return false}return true}()),q=false,e=s.createDocumentFragment();k=(function(){var E;function G(I){o.setTimeout(I,1000/(f.animationInterval||20))}var H=(o.requestAnimationFrame||o.webkitRequestAnimationFrame||o.mozRequestAnimationFrame||o.oRequestAnimationFrame||o.msRequestAnimationFrame||G);E=H?function(){return H.apply(o,arguments)}:null;var D;D=s.createElement("div");function C(J){var I=D.style[J];return(I!==undefined?J:null)}var F={transform:{ie:C("-ms-transform"),moz:C("MozTransform"),opera:C("OTransform"),webkit:C("webkitTransform"),w3:C("transform"),prop:null},getAnimationFrame:E};F.transform.prop=(F.transform.w3||F.transform.moz||F.transform.webkit||F.transform.ie||F.transform.opera);D=null;return F}());this.timer=null;this.flakes=[];this.disabled=false;this.active=false;this.meltFrameCount=20;this.meltFrames=[];this.setXY=function(D,C,E){if(!D){return false}if(f.usePixelPosition||z){D.style.left=(C-f.flakeWidth)+"px";D.style.top=(E-f.flakeHeight)+"px"}else{if(p){D.style.right=(100-(C/b*100))+"%";D.style.top=(Math.min(E,i-f.flakeHeight))+"px"}else{if(!f.flakeBottom){D.style.right=(100-(C/b*100))+"%";D.style.bottom=(100-(E/B*100))+"%"}else{D.style.right=(100-(C/b*100))+"%";D.style.top=(Math.min(E,i-f.flakeHeight))+"px"}}}};this.events=(function(){var D=(!o.addEventListener&&o.attachEvent),I=Array.prototype.slice,C={add:(D?"attachEvent":"addEventListener"),remove:(D?"detachEvent":"removeEventListener")};function G(L){var K=I.call(L),J=K.length;if(D){K[1]="on"+K[1];if(J>3){K.pop()}}else{if(J===3){K.push(false)}}return K}function E(J,M){var K=J.shift(),L=[C[M]];if(D){K[L](J[0],J[1])}else{K[L].apply(K,J)}}function F(){E(G(arguments),"add")}function H(){E(G(arguments),"remove")}return{add:F,remove:H}}());function n(D,C){if(isNaN(C)){C=0}return(Math.random()*D)+C}function x(C){return(parseInt(n(2),10)===1?C*-1:C)}this.randomizeWind=function(){var C;c=x(n(f.vMaxX,0.2));a=n(f.vMaxY,0.2);if(this.flakes){for(C=0;C<this.flakes.length;C++){if(this.flakes[C].active){this.flakes[C].setVelocities()}}}};this.scrollHandler=function(){var C;w=(f.flakeBottom?0:parseInt(o.scrollY||s.documentElement.scrollTop||(p?s.body.scrollTop:0),10));if(isNaN(w)){w=0}if(!m&&!f.flakeBottom&&f.flakes){for(C=0;C<f.flakes.length;C++){if(f.flakes[C].active===0){f.flakes[C].stick()}}}};this.resizeHandler=function(){if(o.innerWidth||o.innerHeight){b=o.innerWidth-16-f.flakeRightOffset;B=(f.flakeBottom||o.innerHeight)}else{b=(s.documentElement.clientWidth||s.body.clientWidth||s.body.scrollWidth)-(!u?8:0)-f.flakeRightOffset;B=f.flakeBottom||s.documentElement.clientHeight||s.body.clientHeight||s.body.scrollHeight}i=s.body.offsetHeight;v=parseInt(b/2,10)};this.resizeHandlerAlt=function(){b=f.targetElement.offsetWidth-f.flakeRightOffset;B=f.flakeBottom||f.targetElement.offsetHeight;v=parseInt(b/2,10);i=s.body.offsetHeight};this.freeze=function(){if(!f.disabled){f.disabled=1}else{return false}f.timer=null};this.resume=function(){if(f.disabled){f.disabled=0}else{return false}f.timerInit()};this.toggleSnow=function(){if(!f.flakes.length){f.start()}else{f.active=!f.active;if(f.active){f.show();f.resume()}else{f.stop();f.freeze()}}};this.stop=function(){var C;this.freeze();for(C=0;C<this.flakes.length;C++){this.flakes[C].o.style.display="none"}f.events.remove(o,"scroll",f.scrollHandler);f.events.remove(o,"resize",f.resizeHandler);if(f.freezeOnBlur){if(u){f.events.remove(s,"focusout",f.freeze);f.events.remove(s,"focusin",f.resume)}else{f.events.remove(o,"blur",f.freeze);f.events.remove(o,"focus",f.resume)}}};this.show=function(){var C;for(C=0;C<this.flakes.length;C++){this.flakes[C].o.style.display="block"}};this.SnowFlake=function(E,C,F){var D=this;this.type=E;this.x=C||parseInt(n(b-20),10);this.y=(!isNaN(F)?F:-n(B)-12);this.vX=null;this.vY=null;this.vAmpTypes=[1,1.2,1.4,1.6,1.8];this.vAmp=this.vAmpTypes[this.type]||1;this.melting=false;this.meltFrameCount=f.meltFrameCount;this.meltFrames=f.meltFrames;this.meltFrame=0;this.twinkleFrame=0;this.active=1;this.fontSize=(10+(this.type/5)*10);this.o=s.createElement("div");this.o.innerHTML=f.snowCharacter;if(f.className){this.o.setAttribute("class",f.className)}this.o.style.color=f.snowColor;this.o.style.position=(m?"fixed":"absolute");if(f.useGPU&&k.transform.prop){this.o.style[k.transform.prop]="translate3d(0px, 0px, 0px)"}this.o.style.width=f.flakeWidth+"px";this.o.style.height=f.flakeHeight+"px";this.o.style.fontFamily="arial,verdana";this.o.style.cursor="default";this.o.style.overflow="hidden";this.o.style.fontWeight="normal";this.o.style.zIndex=f.zIndex;e.appendChild(this.o);this.refresh=function(){if(isNaN(D.x)||isNaN(D.y)){return false}f.setXY(D.o,D.x,D.y)};this.stick=function(){if(p||(f.targetElement!==s.documentElement&&f.targetElement!==s.body)){D.o.style.top=(B+w-f.flakeHeight)+"px"}else{if(f.flakeBottom){D.o.style.top=f.flakeBottom+"px"}else{D.o.style.display="none";D.o.style.bottom="0%";D.o.style.position="fixed";D.o.style.display="block"}}};this.vCheck=function(){if(D.vX>=0&&D.vX<0.2){D.vX=0.2}else{if(D.vX<0&&D.vX>-0.2){D.vX=-0.2}}if(D.vY>=0&&D.vY<0.2){D.vY=0.2}};this.move=function(){var G=D.vX*A,H;D.x+=G;D.y+=(D.vY*D.vAmp);if(D.x>=b||b-D.x<f.flakeWidth){D.x=0}else{if(G<0&&D.x-f.flakeLeftOffset<-f.flakeWidth){D.x=b-f.flakeWidth-1}}D.refresh();H=B+w-D.y+f.flakeHeight;if(H<f.flakeHeight){D.active=0;if(f.snowStick){D.stick()}else{D.recycle()}}else{if(f.useMeltEffect&&D.active&&D.type<3&&!D.melting&&Math.random()>0.998){D.melting=true;D.melt()}if(f.useTwinkleEffect){if(D.twinkleFrame<0){if(Math.random()>0.97){D.twinkleFrame=parseInt(Math.random()*8,10)}}else{D.twinkleFrame--;if(!y){D.o.style.visibility=(D.twinkleFrame&&D.twinkleFrame%2===0?"hidden":"visible")}else{D.o.style.opacity=(D.twinkleFrame&&D.twinkleFrame%2===0?0:1)}}}}};this.animate=function(){D.move()};this.setVelocities=function(){D.vX=c+n(f.vMaxX*0.12,0.1);D.vY=a+n(f.vMaxY*0.12,0.1)};this.setOpacity=function(H,G){if(!y){return false}H.style.opacity=G};this.melt=function(){if(!f.useMeltEffect||!D.melting){D.recycle()}else{if(D.meltFrame<D.meltFrameCount){D.setOpacity(D.o,D.meltFrames[D.meltFrame]);D.o.style.fontSize=D.fontSize-(D.fontSize*(D.meltFrame/D.meltFrameCount))+"px";D.o.style.lineHeight=f.flakeHeight+2+(f.flakeHeight*0.75*(D.meltFrame/D.meltFrameCount))+"px";D.meltFrame++}else{D.recycle()}}};this.recycle=function(){D.o.style.display="none";D.o.style.position=(m?"fixed":"absolute");D.o.style.bottom="auto";D.setVelocities();D.vCheck();D.meltFrame=0;D.melting=false;D.setOpacity(D.o,1);D.o.style.padding="0px";D.o.style.margin="0px";D.o.style.fontSize=D.fontSize+"px";D.o.style.lineHeight=(f.flakeHeight+2)+"px";D.o.style.textAlign="center";D.o.style.verticalAlign="baseline";D.x=parseInt(n(b-f.flakeWidth-20),10);D.y=parseInt(n(B)*-1,10)-f.flakeHeight;D.refresh();D.o.style.display="block";D.active=1};this.recycle();this.refresh()};this.snow=function(){var F=0,C=null,E,D;for(E=0,D=f.flakes.length;E<D;E++){if(f.flakes[E].active===1){f.flakes[E].move();F++}if(f.flakes[E].melting){f.flakes[E].melt()}}if(F<f.flakesMaxActive){C=f.flakes[parseInt(n(f.flakes.length),10)];if(C.active===0){C.melting=true}}if(f.timer){k.getAnimationFrame(f.snow)}};this.mouseMove=function(D){if(!f.followMouse){return true}var C=parseInt(D.clientX,10);if(C<v){A=-l+(C/v*l)}else{C-=v;A=(C/v)*l}};this.createSnow=function(C,E){var D;for(D=0;D<C;D++){f.flakes[f.flakes.length]=new f.SnowFlake(parseInt(n(j),10));if(E||D>f.flakesMaxActive){f.flakes[f.flakes.length-1].active=-1}}f.targetElement.appendChild(e)};this.timerInit=function(){f.timer=true;f.snow()};this.init=function(){var C;for(C=0;C<f.meltFrameCount;C++){f.meltFrames.push(1-(C/f.meltFrameCount))}f.randomizeWind();f.createSnow(f.flakesMax);f.events.add(o,"resize",f.resizeHandler);f.events.add(o,"scroll",f.scrollHandler);if(f.freezeOnBlur){if(u){f.events.add(s,"focusout",f.freeze);f.events.add(s,"focusin",f.resume)}else{f.events.add(o,"blur",f.freeze);f.events.add(o,"focus",f.resume)}}f.resizeHandler();f.scrollHandler();if(f.followMouse){f.events.add(u?s:o,"mousemove",f.mouseMove)}f.animationInterval=Math.max(20,f.animationInterval);f.timerInit()};this.start=function(D){if(!q){q=true}else{if(D){return true}}if(typeof f.targetElement==="string"){var C=f.targetElement;f.targetElement=s.getElementById(C);if(!f.targetElement){throw new Error('Snowstorm: Unable to get targetElement "'+C+'"')}}if(!f.targetElement){f.targetElement=(s.body||s.documentElement)}if(f.targetElement!==s.documentElement&&f.targetElement!==s.body){f.resizeHandler=f.resizeHandlerAlt;f.usePixelPosition=true}f.resizeHandler();f.usePositionFixed=(f.usePositionFixed&&!p&&!f.flakeBottom);if(o.getComputedStyle){try{z=(o.getComputedStyle(f.targetElement,null).getPropertyValue("position")==="relative")}catch(E){z=false}}m=f.usePositionFixed;if(b&&B&&!f.disabled){f.init();f.active=true}};function h(){o.setTimeout(function(){f.start(true)},20);f.events.remove(u?s:o,"mousemove",h)}function g(){if(!f.excludeMobile||!r){h()}f.events.remove(o,"load",g)}if(f.autoStart){f.events.add(o,"load",g,false)}return this}(window,document));
